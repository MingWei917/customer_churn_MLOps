schema: '2.0'
stages:
  preprocess:
    cmd: python src/data/preprocess.py
    deps:
    - path: data/raw/customer_churn.csv
      hash: md5
      md5: 854081ba41b595ae4ed206710813002a
      size: 874328
    - path: src/data/preprocess.py
      hash: md5
      md5: 66d66883d349ff37483b241de0f2bd85
      size: 456
    outs:
    - path: data/processed/customer_churn.parquet
      hash: md5
      md5: 9689e0f41bb4c3d97a0db5c9c48688d8
      size: 107722
  feature:
    cmd: python src/data/feature.py
    deps:
    - path: configs/data/feature.yaml
      hash: md5
      md5: 9e5c26c9dc1d26d047d919d194fc11f7
      size: 635
    - path: data/processed/customer_churn.parquet
      hash: md5
      md5: 9689e0f41bb4c3d97a0db5c9c48688d8
      size: 107722
    - path: src/data/feature.py
      hash: md5
      md5: c1a4ce340b4172b399cbae4d5e87ccda
      size: 1392
    outs:
    - path: data/features/feature.parquet
      hash: md5
      md5: d30b2505843b687e053921aca37f6294
      size: 99297
    - path: data/features/label.parquet
      hash: md5
      md5: 6590276f68eeb57966458459fa00422f
      size: 1933
  train:
    cmd: python src/model/train.py
    deps:
    - path: data/split/train_features.parquet
      hash: md5
      md5: 6281be40ee39602c7d09312498934c06
      size: 97576
    - path: data/split/train_labels.parquet
      hash: md5
      md5: e0a16cb142b4bbdb7882f0b448b3d969
      size: 25792
    - path: data/split/val_features.parquet
      hash: md5
      md5: 85052222d38e5ba243facb8594c183ae
      size: 25351
    - path: data/split/val_labels.parquet
      hash: md5
      md5: a2e26c1c6a1b46a01ba3b4a56517b8b1
      size: 5306
    - path: src/model/train.py
      hash: md5
      md5: 75e5f5387ce79aab8989b77afaadb11c
      size: 3240
    params:
      configs/model/train.yaml:
        model:
          name: xgboost
          params:
            n_estimators: 500
            learning_rate: 0.05
            max_depth: 6
            subsample: 0.8
            colsample_bytree: 0.8
            eval_metric: logloss
            random_state: 42
        output:
          model_path: models/model.pkl
          metrics_path: metrics/metrics.json
        training:
          test_size: 0.2
          stratify: true
    outs:
    - path: metrics/metrics.json
      hash: md5
      md5: 3320cbf86f58a7492a67c8c09b0eac5b
      size: 72
    - path: models/model.pkl
      hash: md5
      md5: 6fc08b97cd7a637598516f4554eccf36
      size: 1693069
  split:
    cmd: python src/data/split.py
    deps:
    - path: configs/data/split.yaml
      hash: md5
      md5: 119f52245a54b9fc251397800f4ed698
      size: 76
    - path: data/features/feature.parquet
      hash: md5
      md5: d30b2505843b687e053921aca37f6294
      size: 99297
    - path: data/features/label.parquet
      hash: md5
      md5: 6590276f68eeb57966458459fa00422f
      size: 1933
    - path: src/data/split.py
      hash: md5
      md5: b926ea18d229f867d38d9c5a87322910
      size: 1713
    outs:
    - path: data/split/test_features.parquet
      hash: md5
      md5: b6ce77255fe56bb3b4be33409f4a5021
      size: 37524
    - path: data/split/test_labels.parquet
      hash: md5
      md5: 4fbce2555983d6cd38498d7182905f21
      size: 8612
    - path: data/split/train_features.parquet
      hash: md5
      md5: 6281be40ee39602c7d09312498934c06
      size: 97576
    - path: data/split/train_labels.parquet
      hash: md5
      md5: e0a16cb142b4bbdb7882f0b448b3d969
      size: 25792
    - path: data/split/val_features.parquet
      hash: md5
      md5: 85052222d38e5ba243facb8594c183ae
      size: 25351
    - path: data/split/val_labels.parquet
      hash: md5
      md5: a2e26c1c6a1b46a01ba3b4a56517b8b1
      size: 5306
  evaluate:
    cmd: python src/model/evaluate.py
    deps:
    - path: data/split/test_features.parquet
      hash: md5
      md5: b6ce77255fe56bb3b4be33409f4a5021
      size: 37524
    - path: data/split/test_labels.parquet
      hash: md5
      md5: 4fbce2555983d6cd38498d7182905f21
      size: 8612
    - path: models/model.pkl
      hash: md5
      md5: 6fc08b97cd7a637598516f4554eccf36
      size: 1693069
    - path: src/model/evaluate.py
      hash: md5
      md5: f39f56ab2820821b62f9805bf7cdacd4
      size: 1113
    outs:
    - path: metrics/test_metrics.json
      hash: md5
      md5: d86df5f9f5d51c67d38a608072490f6a
      size: 108
  gate:
    cmd: python src/model/gate.py
    deps:
    - path: configs/model/validation.yaml
      hash: md5
      md5: 848521f7e050d15163f24cf2f4f195bd
      size: 47
    - path: metrics/metrics.json
      hash: md5
      md5: 3320cbf86f58a7492a67c8c09b0eac5b
      size: 72
